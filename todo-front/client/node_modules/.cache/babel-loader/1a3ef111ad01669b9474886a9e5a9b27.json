{"ast":null,"code":"var _jsxFileName = \"/home/user/\\u041F\\u043B\\u043E\\u0442/projects/todo/todo-front/client/src/modules/user/register/RegisterContainer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport RegisterForm from \"./components/RegisterForm\";\nimport { SET_USER } from \"../store/actionTypes/UserActionTypes\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport UserContext from \"../../../utils/UserContext\";\nimport emailValidator from \"../../../utils/EmailValidator\";\nimport { getAuth, createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RegisterContainer = props => {\n  _s();\n\n  const [id, setId] = useState(uuidv4());\n  const [currentUser, setCurrentUser] = useState(undefined);\n  const [userInfo, setUserInfo] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    secondPassword: \"\"\n  });\n  const [userInfoError, setUserInfoError] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    secondPassword: \"\"\n  });\n  const [{\n    user\n  }, dispatch] = useContext(UserContext);\n  const auth = getAuth();\n\n  const validateForm = () => {\n    let isValid = true;\n    let usernameError = \"\";\n    let passwordError = \"\";\n    let emailError = \"\";\n\n    if (userInfo.username.length <= 3 || userInfo.username.length >= 20) {\n      isValid = false;\n      usernameError = \"Моля, въведете валидно потребителско име.\";\n    }\n\n    if (!userInfo.email.length || !emailValidator(userInfo.email)) {\n      isValid = false;\n      emailError = \"Моля, въведете валиден имейл.\";\n    }\n\n    if (userInfo.password.length <= 1 || userInfo.secondPassword !== userInfo.password) {\n      isValid = false;\n      passwordError = \"Моля, въведете парола.\";\n    }\n\n    setUserInfoError({ ...userInfoError,\n      username: usernameError,\n      password: passwordError,\n      secondPassword: passwordError,\n      email: emailError\n    });\n    return isValid;\n  };\n\n  const resetForm = () => {\n    setUserInfoError({\n      username: \"\",\n      password: \"\",\n      secondPassword: \"\",\n      email: \"\"\n    });\n  };\n\n  const handleSubmit = () => {\n    createUserWithEmailAndPassword(auth, userInfo.email, userInfo.password).then(userCredential => {\n      setCurrentUser(userCredential.user);\n    }).catch(err => {\n      console.log(err);\n    }); // let isRegisterFormValid = validateForm();\n    //\n    // if (!isRegisterFormValid) {\n    //   return;\n    // }\n    //\n    // resetForm();\n    // let user = {\n    //   username: userInfo.username,\n    //   password: userInfo.password,\n    //   email: userInfo.email,\n    //   id: id,\n    //   role: \"USER\",\n    // };\n    // axios\n    //   .post(`http://localhost:4000/user/register`, { user })\n    //   .then((res) => {\n    //     Login();\n    //   })\n    //   .catch((err) => {\n    //     console.log(err.response);\n    //   });\n  };\n\n  const Login = () => {\n    let user = {\n      username: userInfo.username,\n      password: userInfo.password,\n      email: userInfo.email\n    };\n    axios.post(`http://localhost:4000/user/login`, {\n      user\n    }).then(res => {\n      setUser(res.data[0]);\n      window.location.assign(\"/\");\n    }).catch(err => {\n      console.log(err.response);\n    });\n  };\n\n  const handleChange = e => {\n    setUserInfo({ ...userInfo,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const setUser = user => {\n    dispatch({\n      type: SET_USER,\n      payload: {\n        user\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(RegisterForm, {\n    username: userInfo.username,\n    email: userInfo.email,\n    emailError: userInfoError.email,\n    password: userInfo.password,\n    handleSubmit: handleSubmit,\n    handleChange: handleChange,\n    password2: userInfo.secondPassword,\n    usernameError: userInfoError.username,\n    passwordError: userInfoError.password\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RegisterContainer, \"85E3yQS5jkejkNk1b4w1Oj01kh4=\");\n\n_c = RegisterContainer;\nexport default RegisterContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"RegisterContainer\");","map":{"version":3,"sources":["/home/user/Плот/projects/todo/todo-front/client/src/modules/user/register/RegisterContainer.js"],"names":["React","useContext","useState","axios","RegisterForm","SET_USER","v4","uuidv4","UserContext","emailValidator","getAuth","createUserWithEmailAndPassword","RegisterContainer","props","id","setId","currentUser","setCurrentUser","undefined","userInfo","setUserInfo","username","email","password","secondPassword","userInfoError","setUserInfoError","user","dispatch","auth","validateForm","isValid","usernameError","passwordError","emailError","length","resetForm","handleSubmit","then","userCredential","catch","err","console","log","Login","post","res","setUser","data","window","location","assign","response","handleChange","e","target","name","value","type","payload"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport RegisterForm from \"./components/RegisterForm\";\nimport { SET_USER } from \"../store/actionTypes/UserActionTypes\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport UserContext from \"../../../utils/UserContext\";\nimport emailValidator from \"../../../utils/EmailValidator\";\nimport { getAuth, createUserWithEmailAndPassword } from \"firebase/auth\";\n\nconst RegisterContainer = (props) => {\n  const [id, setId] = useState(uuidv4());\n  const [currentUser, setCurrentUser] = useState(undefined);\n  const [userInfo, setUserInfo] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    secondPassword: \"\",\n  });\n  const [userInfoError, setUserInfoError] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    secondPassword: \"\",\n  });\n  const [{ user }, dispatch] = useContext(UserContext);\n  const auth = getAuth();\n  const validateForm = () => {\n    let isValid = true;\n    let usernameError = \"\";\n    let passwordError = \"\";\n    let emailError = \"\";\n    if (userInfo.username.length <= 3 || userInfo.username.length >= 20) {\n      isValid = false;\n      usernameError = \"Моля, въведете валидно потребителско име.\";\n    }\n    if (!userInfo.email.length || !emailValidator(userInfo.email)) {\n      isValid = false;\n      emailError = \"Моля, въведете валиден имейл.\";\n    }\n    if (\n      userInfo.password.length <= 1 ||\n      userInfo.secondPassword !== userInfo.password\n    ) {\n      isValid = false;\n      passwordError = \"Моля, въведете парола.\";\n    }\n    setUserInfoError({\n      ...userInfoError,\n      username: usernameError,\n      password: passwordError,\n      secondPassword: passwordError,\n      email: emailError,\n    });\n    return isValid;\n  };\n  const resetForm = () => {\n    setUserInfoError({\n      username: \"\",\n      password: \"\",\n      secondPassword: \"\",\n      email: \"\",\n    });\n  };\n  const handleSubmit = () => {\n    createUserWithEmailAndPassword(auth, userInfo.email, userInfo.password)\n      .then((userCredential) => {\n        setCurrentUser(userCredential.user);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    // let isRegisterFormValid = validateForm();\n    //\n    // if (!isRegisterFormValid) {\n    //   return;\n    // }\n    //\n    // resetForm();\n    // let user = {\n    //   username: userInfo.username,\n    //   password: userInfo.password,\n    //   email: userInfo.email,\n    //   id: id,\n    //   role: \"USER\",\n    // };\n    // axios\n    //   .post(`http://localhost:4000/user/register`, { user })\n    //   .then((res) => {\n    //     Login();\n    //   })\n    //   .catch((err) => {\n    //     console.log(err.response);\n    //   });\n  };\n  const Login = () => {\n    let user = {\n      username: userInfo.username,\n      password: userInfo.password,\n      email: userInfo.email,\n    };\n    axios\n      .post(`http://localhost:4000/user/login`, { user })\n      .then((res) => {\n        setUser(res.data[0]);\n        window.location.assign(\"/\");\n      })\n      .catch((err) => {\n        console.log(err.response);\n      });\n  };\n  const handleChange = (e) => {\n    setUserInfo({ ...userInfo, [e.target.name]: e.target.value });\n  };\n  const setUser = (user) => {\n    dispatch({\n      type: SET_USER,\n      payload: { user },\n    });\n  };\n\n  return (\n    <RegisterForm\n      username={userInfo.username}\n      email={userInfo.email}\n      emailError={userInfoError.email}\n      password={userInfo.password}\n      handleSubmit={handleSubmit}\n      handleChange={handleChange}\n      password2={userInfo.secondPassword}\n      usernameError={userInfoError.username}\n      passwordError={userInfoError.password}\n    />\n  );\n};\n\nexport default RegisterContainer;\n"]},"metadata":{},"sourceType":"module"}