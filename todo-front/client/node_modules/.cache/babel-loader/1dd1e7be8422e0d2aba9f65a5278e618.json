{"ast":null,"code":"var _jsxFileName = \"/home/user/\\u041F\\u043B\\u043E\\u0442/projects/todo/todo-front/client/src/modules/recipes/list/RecipesListContainer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { H1 } from \"../../../packages/text/Text\";\nimport moment from \"moment\";\nimport { SmallHorizontalCard } from \"../../../packages/card/Card\";\nimport OrangeButton from \"../../../packages/buttons/orangeButton/OrangeButton\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RecipesListContainer = props => {\n  _s();\n\n  const [recipes, setRecipes] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [recipeToShow, setRecipesToShow] = useState(8);\n  const [categories, setCategories] = useState([]);\n  const [categoriesLoading, setCategoriesLoading] = useState(true);\n  useEffect(() => {\n    fetchRecipes();\n    fetchCategories();\n  }, []);\n\n  const fetchRecipes = () => {\n    setIsLoading(true);\n    axios.get(`http://localhost:4000/recipes`).then(res => {\n      setRecipes(res.data);\n      setIsLoading(false);\n    }).catch(e => console.error(e));\n  };\n\n  const fetchCategories = () => {\n    setCategoriesLoading(true);\n    axios.get(`http://localhost:4000/category`).then(res => {\n      setCategories(res.data);\n      setCategoriesLoading(false);\n    }).catch(e => console.error(e));\n  };\n\n  const showMore = () => {\n    setRecipesToShow(recipeToShow + 8);\n  };\n\n  if (isLoading || categoriesLoading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 46\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page_wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section_wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(H1, {\n        h1: \"Всички рецепти\",\n        className: \"h1 main_title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), recipes.slice(0, recipeToShow).map((recipe, index) => {\n        let date = moment.unix(recipe.Date).format(\"DD.MM.YYYY\");\n        let filteredCategory = categories.filter(category => category.id === recipe.categoryId);\n        return /*#__PURE__*/_jsxDEV(SmallHorizontalCard, {\n          recipe: recipe,\n          category: filteredCategory,\n          date: date\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this);\n      }), recipeToShow < recipes.length && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn_wrapper\",\n        children: /*#__PURE__*/_jsxDEV(OrangeButton, {\n          onClick: showMore,\n          text: \"Покажи още\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RecipesListContainer, \"OOXcVofNjARmQRHeIaJK5sfaDB0=\");\n\n_c = RecipesListContainer;\nexport default RecipesListContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"RecipesListContainer\");","map":{"version":3,"sources":["/home/user/Плот/projects/todo/todo-front/client/src/modules/recipes/list/RecipesListContainer.js"],"names":["React","useEffect","useState","axios","H1","moment","SmallHorizontalCard","OrangeButton","RecipesListContainer","props","recipes","setRecipes","isLoading","setIsLoading","recipeToShow","setRecipesToShow","categories","setCategories","categoriesLoading","setCategoriesLoading","fetchRecipes","fetchCategories","get","then","res","data","catch","e","console","error","showMore","slice","map","recipe","index","date","unix","Date","format","filteredCategory","filter","category","id","categoryId","length"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,EAAT,QAAmB,6BAAnB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,mBAAT,QAAoC,6BAApC;AACA,OAAOC,YAAP,MAAyB,qDAAzB;;;AAEA,MAAMC,oBAAoB,GAAIC,KAAD,IAAW;AAAA;;AACtC,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBT,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACU,SAAD,EAAYC,YAAZ,IAA4BX,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAM,CAACY,YAAD,EAAeC,gBAAf,IAAmCb,QAAQ,CAAC,CAAD,CAAjD;AACA,QAAM,CAACc,UAAD,EAAaC,aAAb,IAA8Bf,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACgB,iBAAD,EAAoBC,oBAApB,IAA4CjB,QAAQ,CAAC,IAAD,CAA1D;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdmB,IAAAA,YAAY;AACZC,IAAAA,eAAe;AAChB,GAHQ,EAGN,EAHM,CAAT;;AAKA,QAAMD,YAAY,GAAG,MAAM;AACzBP,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAV,IAAAA,KAAK,CACFmB,GADH,CACQ,+BADR,EAEGC,IAFH,CAESC,GAAD,IAAS;AACbb,MAAAA,UAAU,CAACa,GAAG,CAACC,IAAL,CAAV;AACAZ,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KALH,EAMGa,KANH,CAMUC,CAAD,IAAOC,OAAO,CAACC,KAAR,CAAcF,CAAd,CANhB;AAOD,GATD;;AAUA,QAAMN,eAAe,GAAG,MAAM;AAC5BF,IAAAA,oBAAoB,CAAC,IAAD,CAApB;AACAhB,IAAAA,KAAK,CACFmB,GADH,CACQ,gCADR,EAEGC,IAFH,CAESC,GAAD,IAAS;AACbP,MAAAA,aAAa,CAACO,GAAG,CAACC,IAAL,CAAb;AACAN,MAAAA,oBAAoB,CAAC,KAAD,CAApB;AACD,KALH,EAMGO,KANH,CAMUC,CAAD,IAAOC,OAAO,CAACC,KAAR,CAAcF,CAAd,CANhB;AAOD,GATD;;AAUA,QAAMG,QAAQ,GAAG,MAAM;AACrBf,IAAAA,gBAAgB,CAACD,YAAY,GAAG,CAAhB,CAAhB;AACD,GAFD;;AAGA,MAAIF,SAAS,IAAIM,iBAAjB,EAAoC,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACpC,sBACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA,8BACE,QAAC,EAAD;AAAI,QAAA,EAAE,EAAE,gBAAR;AAA0B,QAAA,SAAS,EAAE;AAArC;AAAA;AAAA;AAAA;AAAA,cADF,EAEGR,OAAO,CAACqB,KAAR,CAAc,CAAd,EAAiBjB,YAAjB,EAA+BkB,GAA/B,CAAmC,CAACC,MAAD,EAASC,KAAT,KAAmB;AACrD,YAAIC,IAAI,GAAG9B,MAAM,CAAC+B,IAAP,CAAYH,MAAM,CAACI,IAAnB,EAAyBC,MAAzB,CAAgC,YAAhC,CAAX;AACA,YAAIC,gBAAgB,GAAGvB,UAAU,CAACwB,MAAX,CACpBC,QAAD,IAAcA,QAAQ,CAACC,EAAT,KAAgBT,MAAM,CAACU,UADhB,CAAvB;AAGA,4BACE,QAAC,mBAAD;AAEE,UAAA,MAAM,EAAEV,MAFV;AAGE,UAAA,QAAQ,EAAEM,gBAHZ;AAIE,UAAA,IAAI,EAAEJ;AAJR,WACOD,KADP;AAAA;AAAA;AAAA;AAAA,gBADF;AAQD,OAbA,CAFH,EAgBGpB,YAAY,GAAGJ,OAAO,CAACkC,MAAvB,iBACC;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA,+BACE,QAAC,YAAD;AAAc,UAAA,OAAO,EAAEd,QAAvB;AAAiC,UAAA,IAAI,EAAE;AAAvC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAjBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AA0BD,CA9DD;;GAAMtB,oB;;KAAAA,oB;AAgEN,eAAeA,oBAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { H1 } from \"../../../packages/text/Text\";\nimport moment from \"moment\";\nimport { SmallHorizontalCard } from \"../../../packages/card/Card\";\nimport OrangeButton from \"../../../packages/buttons/orangeButton/OrangeButton\";\n\nconst RecipesListContainer = (props) => {\n  const [recipes, setRecipes] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [recipeToShow, setRecipesToShow] = useState(8);\n  const [categories, setCategories] = useState([]);\n  const [categoriesLoading, setCategoriesLoading] = useState(true);\n\n  useEffect(() => {\n    fetchRecipes();\n    fetchCategories();\n  }, []);\n\n  const fetchRecipes = () => {\n    setIsLoading(true);\n    axios\n      .get(`http://localhost:4000/recipes`)\n      .then((res) => {\n        setRecipes(res.data);\n        setIsLoading(false);\n      })\n      .catch((e) => console.error(e));\n  };\n  const fetchCategories = () => {\n    setCategoriesLoading(true);\n    axios\n      .get(`http://localhost:4000/category`)\n      .then((res) => {\n        setCategories(res.data);\n        setCategoriesLoading(false);\n      })\n      .catch((e) => console.error(e));\n  };\n  const showMore = () => {\n    setRecipesToShow(recipeToShow + 8);\n  };\n  if (isLoading || categoriesLoading) return <p>Loading</p>;\n  return (\n    <div className=\"page_wrapper\">\n      <div className=\"section_wrapper\">\n        <H1 h1={\"Всички рецепти\"} className={\"h1 main_title\"} />\n        {recipes.slice(0, recipeToShow).map((recipe, index) => {\n          let date = moment.unix(recipe.Date).format(\"DD.MM.YYYY\");\n          let filteredCategory = categories.filter(\n            (category) => category.id === recipe.categoryId\n          );\n          return (\n            <SmallHorizontalCard\n              key={index}\n              recipe={recipe}\n              category={filteredCategory}\n              date={date}\n            />\n          );\n        })}\n        {recipeToShow < recipes.length && (\n          <div className=\"btn_wrapper\">\n            <OrangeButton onClick={showMore} text={\"Покажи още\"} />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default RecipesListContainer;\n"]},"metadata":{},"sourceType":"module"}