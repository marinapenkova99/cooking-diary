{"ast":null,"code":"var _jsxFileName = \"/home/user/\\u041F\\u043B\\u043E\\u0442/projects/todo/todo-front/client/src/modules/user/register/RegisterContainer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport RegisterForm from \"./components/RegisterForm\";\nimport { SET_USER } from \"../store/actionTypes/UserActionTypes\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport UserContext from \"../../../utils/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RegisterContainer = props => {\n  _s();\n\n  const [id, setId] = useState(uuidv4());\n  const [userInfo, setUserInfo] = useState({\n    username: \"\",\n    password: \"\",\n    secondPassword: \"\"\n  });\n  const [userInfoError, setUserInfoError] = useState({\n    username: \"\",\n    password: \"\",\n    secondPassword: \"\"\n  });\n  const [{\n    user\n  }, dispatch] = useContext(UserContext);\n\n  const validateForm = () => {\n    let isValid = true;\n    let usernameError = \"\";\n    let passwordError = \"\";\n\n    if (userInfo.username.length <= 3 || userInfo.username.length >= 20) {\n      isValid = false;\n      usernameError = \"Моля, въведете валидно потребителско име.\";\n    }\n\n    if (userInfo.password.length <= 1 || userInfo.secondPassword !== userInfo.password) {\n      isValid = false;\n      passwordError = \"Моля, въведете парола.\";\n    }\n\n    setUserInfoError({ ...userInfoError,\n      username: usernameError,\n      password: passwordError,\n      secondPassword: passwordError\n    });\n    return isValid;\n  };\n\n  const resetForm = () => {\n    setUserInfoError({\n      username: \"\",\n      password: \"\",\n      secondPassword: \"\"\n    });\n  };\n\n  const handleSubmit = () => {\n    let isRegisterFormValid = validateForm();\n\n    if (!isRegisterFormValid) {\n      return;\n    }\n\n    resetForm();\n    let user = {\n      username: userInfo.username,\n      password: userInfo.password,\n      id: id,\n      role: \"USER\"\n    };\n    axios.post(`http://localhost:4000/user/register`, {\n      user\n    }).then(res => {\n      Login();\n    }).catch(err => {\n      console.log(err.response);\n    });\n  };\n\n  const Login = () => {\n    let user = {\n      username: userInfo.username,\n      password: userInfo.password\n    };\n    axios.post(`http://localhost:4000/user/login`, {\n      user\n    }).then(res => {\n      setUser(res.data[0]);\n      window.location.assign(\"/\");\n    }).catch(err => {\n      console.log(err.response);\n    });\n  };\n\n  const handleChange = e => {\n    setUserInfo({ ...userInfo,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const setUser = user => {\n    dispatch({\n      type: SET_USER,\n      payload: {\n        user\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(RegisterForm, {\n    username: userInfo.username,\n    password: userInfo.password,\n    handleSubmit: handleSubmit,\n    handleChange: handleChange,\n    password2: userInfo.secondPassword,\n    usernameError: userInfoError.username,\n    passwordError: userInfoError.password\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RegisterContainer, \"eEx7C2FI9hQDr4OED9JASX557pU=\");\n\n_c = RegisterContainer;\nexport default RegisterContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"RegisterContainer\");","map":{"version":3,"sources":["/home/user/Плот/projects/todo/todo-front/client/src/modules/user/register/RegisterContainer.js"],"names":["React","useContext","useState","axios","RegisterForm","SET_USER","v4","uuidv4","UserContext","RegisterContainer","props","id","setId","userInfo","setUserInfo","username","password","secondPassword","userInfoError","setUserInfoError","user","dispatch","validateForm","isValid","usernameError","passwordError","length","resetForm","handleSubmit","isRegisterFormValid","role","post","then","res","Login","catch","err","console","log","response","setUser","data","window","location","assign","handleChange","e","target","name","value","type","payload"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport RegisterForm from \"./components/RegisterForm\";\nimport { SET_USER } from \"../store/actionTypes/UserActionTypes\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport UserContext from \"../../../utils/UserContext\";\n\nconst RegisterContainer = (props) => {\n  const [id, setId] = useState(uuidv4());\n  const [userInfo, setUserInfo] = useState({\n    username: \"\",\n    password: \"\",\n    secondPassword: \"\",\n  });\n  const [userInfoError, setUserInfoError] = useState({\n    username: \"\",\n    password: \"\",\n    secondPassword: \"\",\n  });\n  const [{ user }, dispatch] = useContext(UserContext);\n\n  const validateForm = () => {\n    let isValid = true;\n    let usernameError = \"\";\n    let passwordError= \"\";\n    if (userInfo.username.length <= 3 || userInfo.username.length >= 20) {\n      isValid = false;\n      usernameError = \"Моля, въведете валидно потребителско име.\";\n    }\n    if (\n      userInfo.password.length <= 1 ||\n      userInfo.secondPassword !== userInfo.password\n    ) {\n      isValid = false;\n      passwordError = \"Моля, въведете парола.\";\n    }\n    setUserInfoError({\n      ...userInfoError,\n      username: usernameError,\n      password: passwordError,\n      secondPassword: passwordError,\n    });\n    return isValid;\n  };\n  const resetForm = () => {\n    setUserInfoError({\n      username: \"\",\n      password: \"\",\n      secondPassword: \"\",\n    });\n  };\n  const handleSubmit = () => {\n    let isRegisterFormValid = validateForm();\n\n    if (!isRegisterFormValid) {\n      return;\n    }\n\n    resetForm();\n    let user = {\n      username: userInfo.username,\n      password: userInfo.password,\n      id: id,\n      role: \"USER\",\n    };\n    axios\n      .post(`http://localhost:4000/user/register`, { user })\n      .then((res) => {\n        Login();\n      })\n      .catch((err) => {\n        console.log(err.response);\n      });\n  };\n  const Login = () => {\n    let user = {\n      username: userInfo.username,\n      password: userInfo.password,\n    };\n    axios\n      .post(`http://localhost:4000/user/login`, { user })\n      .then((res) => {\n        setUser(res.data[0]);\n        window.location.assign(\"/\");\n      })\n      .catch((err) => {\n        console.log(err.response);\n      });\n  };\n  const handleChange = (e) => {\n    setUserInfo({ ...userInfo, [e.target.name]: e.target.value });\n  };\n  const setUser = (user) => {\n    dispatch({\n      type: SET_USER,\n      payload: { user },\n    });\n  };\n\n  return (\n    <RegisterForm\n      username={userInfo.username}\n      password={userInfo.password}\n      handleSubmit={handleSubmit}\n      handleChange={handleChange}\n      password2={userInfo.secondPassword}\n      usernameError={userInfoError.username}\n      passwordError={userInfoError.password}\n    />\n  );\n};\n\nexport default RegisterContainer;\n"]},"metadata":{},"sourceType":"module"}