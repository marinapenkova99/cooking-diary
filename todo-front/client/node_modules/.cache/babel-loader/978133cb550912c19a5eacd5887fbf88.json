{"ast":null,"code":"var _jsxFileName = \"/home/user/\\u041F\\u043B\\u043E\\u0442/projects/todo/todo-front/client/src/modules/recipes/createRecipe/CreateRecipeContainer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport RecipeImageUploader from \"../recipeImageUploader/RecipeImageUploader\";\nimport TextEditor from \"../textEditor/TextEditor\";\nimport UserLayout from \"../../../packages/userLayout/UserLayout\";\nimport OrangeButton from \"../../../packages/buttons/orangeButton/OrangeButton\";\nimport { H2, Label } from \"../../../packages/text/Text\";\nimport Input from \"../../../packages/input/Input\";\nimport \"./../../../packages/input/InputStyle.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CreateRecipeContainer = props => {\n  _s();\n\n  const [errors, setErrors] = useState({\n    title: \"\",\n    date: \"\",\n    description: \"\",\n    cookingTime: \"\",\n    levelOfDifficulty: '',\n    selectedCategory: \"\",\n    imagePreviewUrl: \"\"\n  });\n  const [file, setFile] = useState(\"\");\n  const [imagePreviewUrl, setImagePreviewUrl] = useState(\"\");\n  const [categories, setCategories] = useState([]);\n  const [categoriesLoading, setCategoriesLoading] = useState(true);\n  const [recipeInfo, setRecipeInfo] = useState({\n    id: Math.random() * 1000,\n    title: \"\",\n    date: \"\",\n    description: \"\",\n    cookingTime: \"\",\n    levelOfDifficulty: 0,\n    selectedCategory: \"\"\n  });\n  useEffect(() => {\n    fetchCategories();\n  }, []);\n\n  const fetchCategories = () => {\n    setCategoriesLoading(true);\n    axios.get(`http://localhost:4000/category`).then(res => {\n      setCategories(res.data);\n      setCategoriesLoading(false);\n    }).catch(e => console.error(e));\n  };\n\n  const validateForm = () => {\n    let isValid = true;\n    let recipeErrors = {\n      title: \"\",\n      date: \"\",\n      description: \"\",\n      cookingTime: \"\",\n      levelOfDifficulty: '',\n      selectedCategory: \"\",\n      imagePreviewUrl: \"\"\n    };\n\n    if (recipeInfo.title.length < 1 || recipeInfo.title.length > 200) {\n      isValid = false;\n      recipeErrors.title = \"Моля въведете валидно заглавие\";\n    }\n\n    if (!recipeInfo.date.length) {\n      isValid = false;\n      recipeErrors.date = \"Моля въведете валидна дата\";\n    }\n\n    if (recipeInfo.description.length < 3) {\n      isValid = false;\n      recipeErrors.description = \"Моля въведете описание\";\n    }\n\n    if (recipeInfo.cookingTime.length < 1) {\n      isValid = false;\n      recipeErrors.cookingTime = \"Моля въведете време за готвене\";\n    }\n\n    if (recipeInfo.levelOfDifficulty < 1) {\n      isValid = false;\n      recipeErrors.levelOfDifficulty = \"Моля въведете ниво на трудност\";\n    }\n\n    if (!recipeInfo.selectedCategory) {\n      isValid = false;\n      recipeErrors.selectedCategory = \"Моля изберете категория\";\n    }\n\n    if (!imagePreviewUrl) {\n      isValid = false;\n      recipeErrors.imagePreviewUrl = \"Моля изберете снимка\";\n    }\n\n    setErrors({ ...errors,\n      title: recipeErrors.title,\n      date: recipeErrors.date,\n      description: recipeErrors.description,\n      cookingTime: recipeErrors.cookingTime,\n      levelOfDifficulty: recipeErrors.levelOfDifficulty,\n      selectedCategory: recipeErrors.selectedCategory,\n      imagePreviewUrl: recipeErrors.imagePreviewUrl\n    });\n    return isValid;\n  };\n\n  const resetForm = () => {\n    setErrors({\n      title: \"\",\n      date: \"\",\n      description: \"\",\n      cookingTime: \"\",\n      levelOfDifficulty: '',\n      selectedCategory: \"\",\n      imagePreviewUrl: \"\"\n    });\n  };\n\n  const handleSubmit = () => {\n    let isCreateTaskFormValid = validateForm();\n\n    if (!isCreateTaskFormValid) {\n      return;\n    }\n\n    resetForm();\n    let recipe = {\n      id: recipeInfo.id,\n      title: recipeInfo.title,\n      Date: new Date(recipeInfo.date).getTime() / 1000,\n      description: recipeInfo.description !== \"\" ? recipeInfo.description : undefined,\n      image: imagePreviewUrl,\n      categoryId: recipeInfo.selectedCategory,\n      cooking_time: recipeInfo.cookingTime,\n      level_of_difficulty: recipeInfo.levelOfDifficulty\n    };\n    axios.post(`http://localhost:4000/recipes`, {\n      recipe\n    }).then(res => {\n      window.location.reload();\n    }).catch(e => console.error(e));\n  };\n\n  const handleChange = e => {\n    setRecipeInfo({ ...recipeInfo,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleImageChange = e => {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      setFile(file);\n      setImagePreviewUrl(reader.result);\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  const handleQuillChange = value => {\n    setRecipeInfo({ ...recipeInfo,\n      description: value\n    });\n  };\n\n  {\n    console.log(re);\n  }\n  if (categoriesLoading) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page_wrapper\",\n    children: /*#__PURE__*/_jsxDEV(UserLayout, {\n      children: [/*#__PURE__*/_jsxDEV(H2, {\n        h2: \"Създай рецепта\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RecipeImageUploader, {\n        handleImageChange: handleImageChange,\n        imagePreviewUrl: imagePreviewUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), errors.imagePreviewUrl && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: errors.imagePreviewUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Label, {\n        label: \"Заглавие\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        handleInput: handleChange,\n        value: recipeInfo.title,\n        error: errors.title,\n        type: \"text\",\n        name: \"title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(Label, {\n        label: \"Дата\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        handleInput: handleChange,\n        value: recipeInfo.date,\n        error: errors.date,\n        type: \"date\",\n        name: \"date\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(Label, {\n        label: \"Време за приготване\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        handleInput: handleChange,\n        value: recipeInfo.cookingTime,\n        error: errors.cookingTime,\n        type: \"text\",\n        name: \"cookingTime\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(Label, {\n        label: \"Трудност\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        handleInput: handleChange,\n        value: recipeInfo.levelOfDifficulty,\n        error: errors.levelOfDifficulty,\n        type: \"text\",\n        name: \"levelOfDifficulty\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Label, {\n        label: \"Описание\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextEditor, {\n        placeholder: \"Започнете да пишете...\",\n        value: recipeInfo.description,\n        onTextEditorChange: text => handleQuillChange(text)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), \" \", errors.description && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: errors.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 32\n      }, this), /*#__PURE__*/_jsxDEV(Label, {\n        label: \"Изберете категория\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"input\",\n        onChange: handleChange,\n        name: \"selectedCategory\",\n        value: recipeInfo.selectedCategory,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \" \\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), categories.map((category, index) => {\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: category.id,\n            children: category.name\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 15\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), errors.selectedCategory && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: errors.selectedCategory\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn_wrapper\",\n        children: /*#__PURE__*/_jsxDEV(OrangeButton, {\n          onClick: handleSubmit,\n          text: \"Създай\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 157,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CreateRecipeContainer, \"koy0DhRkQK49pjOgPhd0nv6kl6U=\");\n\n_c = CreateRecipeContainer;\nexport default CreateRecipeContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateRecipeContainer\");","map":{"version":3,"sources":["/home/user/Плот/projects/todo/todo-front/client/src/modules/recipes/createRecipe/CreateRecipeContainer.js"],"names":["React","useEffect","useState","axios","RecipeImageUploader","TextEditor","UserLayout","OrangeButton","H2","Label","Input","CreateRecipeContainer","props","errors","setErrors","title","date","description","cookingTime","levelOfDifficulty","selectedCategory","imagePreviewUrl","file","setFile","setImagePreviewUrl","categories","setCategories","categoriesLoading","setCategoriesLoading","recipeInfo","setRecipeInfo","id","Math","random","fetchCategories","get","then","res","data","catch","e","console","error","validateForm","isValid","recipeErrors","length","resetForm","handleSubmit","isCreateTaskFormValid","recipe","Date","getTime","undefined","image","categoryId","cooking_time","level_of_difficulty","post","window","location","reload","handleChange","target","name","value","handleImageChange","preventDefault","reader","FileReader","files","onloadend","result","readAsDataURL","handleQuillChange","log","re","text","map","category","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport RecipeImageUploader from \"../recipeImageUploader/RecipeImageUploader\";\nimport TextEditor from \"../textEditor/TextEditor\";\nimport UserLayout from \"../../../packages/userLayout/UserLayout\";\nimport OrangeButton from \"../../../packages/buttons/orangeButton/OrangeButton\";\nimport { H2, Label } from \"../../../packages/text/Text\";\nimport Input from \"../../../packages/input/Input\";\nimport \"./../../../packages/input/InputStyle.css\";\nconst CreateRecipeContainer = (props) => {\n  const [errors, setErrors] = useState({\n    title: \"\",\n    date: \"\",\n    description: \"\",\n    cookingTime: \"\",\n    levelOfDifficulty: '',\n    selectedCategory: \"\",\n    imagePreviewUrl: \"\",\n  });\n  const [file, setFile] = useState(\"\");\n  const [imagePreviewUrl, setImagePreviewUrl] = useState(\"\");\n  const [categories, setCategories] = useState([]);\n  const [categoriesLoading, setCategoriesLoading] = useState(true);\n  const [recipeInfo, setRecipeInfo] = useState({\n    id: Math.random() * 1000,\n    title: \"\",\n    date: \"\",\n    description: \"\",\n    cookingTime: \"\",\n    levelOfDifficulty: 0,\n    selectedCategory: \"\",\n  });\n  useEffect(() => {\n    fetchCategories();\n  }, []);\n  const fetchCategories = () => {\n    setCategoriesLoading(true);\n    axios\n      .get(`http://localhost:4000/category`)\n      .then((res) => {\n        setCategories(res.data);\n        setCategoriesLoading(false);\n      })\n      .catch((e) => console.error(e));\n  };\n  const validateForm = () => {\n    let isValid = true;\n    let recipeErrors = {\n      title: \"\",\n      date: \"\",\n      description: \"\",\n      cookingTime: \"\",\n      levelOfDifficulty: '',\n      selectedCategory: \"\",\n      imagePreviewUrl: \"\",\n    };\n    if (recipeInfo.title.length < 1 || recipeInfo.title.length > 200) {\n      isValid = false;\n      recipeErrors.title = \"Моля въведете валидно заглавие\";\n    }\n    if (!recipeInfo.date.length) {\n      isValid = false;\n      recipeErrors.date = \"Моля въведете валидна дата\";\n    }\n    if (recipeInfo.description.length < 3) {\n      isValid = false;\n      recipeErrors.description = \"Моля въведете описание\";\n    }\n    if (recipeInfo.cookingTime.length < 1) {\n      isValid = false;\n      recipeErrors.cookingTime = \"Моля въведете време за готвене\";\n    }\n    if (recipeInfo.levelOfDifficulty < 1) {\n      isValid = false;\n      recipeErrors.levelOfDifficulty = \"Моля въведете ниво на трудност\";\n    }\n    if (!recipeInfo.selectedCategory) {\n      isValid = false;\n      recipeErrors.selectedCategory = \"Моля изберете категория\";\n    }\n    if (!imagePreviewUrl) {\n      isValid = false;\n      recipeErrors.imagePreviewUrl = \"Моля изберете снимка\";\n    }\n    setErrors({\n      ...errors,\n      title: recipeErrors.title,\n      date: recipeErrors.date,\n      description: recipeErrors.description,\n      cookingTime: recipeErrors.cookingTime,\n      levelOfDifficulty: recipeErrors.levelOfDifficulty,\n      selectedCategory: recipeErrors.selectedCategory,\n      imagePreviewUrl: recipeErrors.imagePreviewUrl,\n    });\n\n    return isValid;\n  };\n  const resetForm = () => {\n    setErrors({\n      title: \"\",\n      date: \"\",\n      description: \"\",\n      cookingTime: \"\",\n      levelOfDifficulty: '',\n      selectedCategory: \"\",\n      imagePreviewUrl: \"\",\n    });\n  };\n  const handleSubmit = () => {\n    let isCreateTaskFormValid = validateForm();\n\n    if (!isCreateTaskFormValid) {\n      return;\n    }\n\n    resetForm();\n    let recipe = {\n      id: recipeInfo.id,\n      title: recipeInfo.title,\n      Date: new Date(recipeInfo.date).getTime() / 1000,\n      description:\n        recipeInfo.description !== \"\" ? recipeInfo.description : undefined,\n      image: imagePreviewUrl,\n      categoryId: recipeInfo.selectedCategory,\n      cooking_time: recipeInfo.cookingTime,\n      level_of_difficulty: recipeInfo.levelOfDifficulty,\n    };\n    axios\n      .post(`http://localhost:4000/recipes`, { recipe })\n      .then((res) => {\n        window.location.reload();\n      })\n      .catch((e) => console.error(e));\n  };\n  const handleChange = (e) => {\n    setRecipeInfo({ ...recipeInfo, [e.target.name]: e.target.value });\n  };\n  const handleImageChange = (e) => {\n    e.preventDefault();\n\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      setFile(file);\n      setImagePreviewUrl(reader.result);\n    };\n\n    reader.readAsDataURL(file);\n  };\n  const handleQuillChange = (value) => {\n    setRecipeInfo({ ...recipeInfo, description: value });\n  };\n  {console.log(re)}\n  if (categoriesLoading) return null;\n  return (\n    <div className=\"page_wrapper\">\n      <UserLayout>\n        <H2 h2={\"Създай рецепта\"} />\n        <RecipeImageUploader\n          handleImageChange={handleImageChange}\n          imagePreviewUrl={imagePreviewUrl}\n        />\n        {errors.imagePreviewUrl && (\n          <p className=\"error\">{errors.imagePreviewUrl}</p>\n        )}\n        <Label label={\"Заглавие\"} />\n        <Input\n          handleInput={handleChange}\n          value={recipeInfo.title}\n          error={errors.title}\n          type={\"text\"}\n          name={\"title\"}\n        />{\" \"}\n        <Label label={\"Дата\"} />\n        <Input\n          handleInput={handleChange}\n          value={recipeInfo.date}\n          error={errors.date}\n          type={\"date\"}\n          name={\"date\"}\n        />{\" \"}\n        <Label label={\"Време за приготване\"} />\n        <Input\n          handleInput={handleChange}\n          value={recipeInfo.cookingTime}\n          error={errors.cookingTime}\n          type={\"text\"}\n          name={\"cookingTime\"}\n        />{\" \"}\n        <Label label={\"Трудност\"} />\n        <Input\n          handleInput={handleChange}\n          value={recipeInfo.levelOfDifficulty}\n          error={errors.levelOfDifficulty}\n          type={\"text\"}\n          name={\"levelOfDifficulty\"}\n        />\n        <Label label={\"Описание\"} />\n        <TextEditor\n          placeholder={\"Започнете да пишете...\"}\n          value={recipeInfo.description}\n          onTextEditorChange={(text) => handleQuillChange(text)}\n        />{\" \"}\n        {errors.description && <p className=\"error\">{errors.description}</p>}\n        <Label label={\"Изберете категория\"} />\n        <select\n          className=\"input\"\n          onChange={handleChange}\n          name={\"selectedCategory\"}\n          value={recipeInfo.selectedCategory}\n        >\n          <option value=\"\"> Категория</option>\n          {categories.map((category, index) => {\n            return (\n              <option key={index} value={category.id}>\n                {category.name}\n              </option>\n            );\n          })}\n        </select>\n        {errors.selectedCategory && (\n          <p className=\"error\">{errors.selectedCategory}</p>\n        )}\n        <div className=\"btn_wrapper\">\n          <OrangeButton onClick={handleSubmit} text={\"Създай\"} />\n        </div>\n      </UserLayout>\n    </div>\n  );\n};\n\nexport default CreateRecipeContainer;\n"]},"metadata":{},"sourceType":"module"}